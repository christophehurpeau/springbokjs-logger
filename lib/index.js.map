{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"src/index.js","sourcesContent":["var winston = require('winston');\nimport levels from './levels/levels';\nimport colors from './levels/colors';\nimport formatter from './formatter';\n\nwinston.addColors(colors);\n\nexport function createConsoleTransport(options = {}) {\n    var transportOptions = {\n        level: 'trace',\n        colorize: true,\n        timestamp: function() {\n            var d = new Date();\n            var dayOfMonth = d.getDate();\n            if (dayOfMonth < 10) {\n                dayOfMonth = '0' + dayOfMonth;\n            }\n            return dayOfMonth + ' ' + d.toTimeString().split(' ')[0];\n        },\n        prettyPrint: true,\n        formatter: formatter\n    };\n    for (let k in options) {\n        transportOptions[k] = options;\n    }\n\n    return new winston.transports.Console(transportOptions);\n}\n\nvar labelRewriter = function(msg, meta, level, logger) {\n    let label = logger && logger.label;\n\n    if (meta && meta.label) {\n        label = meta.label;\n        delete meta.label;\n    }\n    if (label) {\n        msg = '[' + label + '] ' + msg;\n    }\n\n    return { msg, meta };\n};\n\n\nexport function createLogger(options = {}) {\n    if (!options.transports) {\n        options.transports = [\n            createConsoleTransport(options.consoleTransportOptions)\n        ];\n    }\n\n    options.levels = levels;\n\n    var logger = new winston.Logger(options);\n\n    logger.addFilter(labelRewriter.bind(logger));\n\n    return logger;\n}\n\n\nObject.defineProperty(exports, 'logger', {\n    configurable: true,\n    get: function() {\n        let logger = createLogger();\n        Object.defineProperty(exports, 'logger', {\n            value: logger\n        });\n        return logger;\n    }\n});\n\nexport function createPrefixedLogger(logger, prefix) {\n    if (prefix == null) {\n        prefix = logger;\n        logger = exports.logger;\n    }\n    // can't do.\n    return logger;\n}\n"]}