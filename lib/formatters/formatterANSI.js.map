{"version":3,"sources":["../../src/formatters/formatterANSI.js"],"names":[],"mappings":"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","file":"formatterANSI.js","sourcesContent":["import LogLevel from '../LogLevel';\nimport ansi from 'ansi-styles';\n\nconst levelToSymbol = {};\nlevelToSymbol[LogLevel.TRACE] = '•';\nlevelToSymbol[LogLevel.DEBUG] = '•';\nlevelToSymbol[LogLevel.INFO] = '→';\nlevelToSymbol[LogLevel.WARN] = '⚠';\nlevelToSymbol[LogLevel.ERROR] = '✖';\nlevelToSymbol[LogLevel.CRITICAL] = '!';\nlevelToSymbol[LogLevel.FATAL] = '‼';\nlevelToSymbol[LogLevel.EMERGENCY] = '‼';\n\nconst levelToStyles = {};\nlevelToStyles[LogLevel.TRACE] = ['gray'];\nlevelToStyles[LogLevel.DEBUG] = ['gray'];\n// levelToStyles[LogLevel.INFO] = ['gray'];\nlevelToStyles[LogLevel.WARN] = ['yellow'];\nlevelToStyles[LogLevel.ERROR] = ['red', 'bold'];\nlevelToStyles[LogLevel.CRITICAL] = ['red', 'bold'];\nlevelToStyles[LogLevel.FATAL] = ['bgRed', 'white'];\nlevelToStyles[LogLevel.EMERGENCY] = ['bgRed', 'white'];\n\nexport function style(styles, string) {\n    if (!styles.length || !string) {\n        return string;\n    }\n\n    return styles.reduce(function(string, styleName) {\n        let style = ansi[styleName];\n\n        if (!style) {\n            throw new Error('Unknown style: ' + styleName);\n        }\n\n        return style.open + string + style.close;\n    }, string);\n}\n\nfunction displayObject(object, contextStyles) {\n    const keys = Object.keys(object);\n\n    if (keys.length === 0) {\n        return;\n    }\n\n    return '{ ' + keys.map(key => {\n        return key + ': ' + this.style(contextStyles && contextStyles[key], JSON.stringify(object[key]));\n    }).join(', ') + ' }';\n}\n\nexport function format(record) {\n    let string = '';\n    if (record.prefix) {\n        string += this.style(['gray'], record.prefix);\n    }\n\n    if (record.datetime) {\n        if (string.length !== 0) {\n            string += ' ';\n        }\n\n        string += this.style(['gray', 'bold'], record.datetime.toTimeString().split(' ')[0]);\n        /* new Date().toFormat('HH24:MI:SS') */\n    }\n\n    let message = record.symbol || levelToSymbol[record.level];\n    let styles = record.styles || levelToStyles[record.level];\n\n    if (record.message) {\n        if (message && message.length !== 0) {\n            message +=  ' ' + record.message;\n        } else {\n            message = record.message;\n        }\n    }\n\n    if (styles) {\n        message = this.style(styles, message);\n    }\n\n    if (string.length !== 0) {\n        string += ' ';\n    }\n\n    string += message;\n\n    if (record.context) {\n        const stringObject = displayObject.call(this, record.context, record.contextStyles);\n\n        if (stringObject) {\n            if (string.length !== 0) {\n                string += ' ';\n            }\n\n            string += stringObject;\n        }\n    }\n\n    if (record.extra) {\n        const stringObject = displayObject.call(this, record.extra);\n\n        if (stringObject) {\n            if (string.length !== 0) {\n                string += ' ';\n            }\n\n            string += stringObject;\n        }\n    }\n\n    return string;\n}\n\n"]}