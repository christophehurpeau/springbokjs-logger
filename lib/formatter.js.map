{"version":3,"sources":["../src/formatter.js"],"names":[],"mappings":"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","file":"src/formatter.js","sourcesContent":["    var winston = require('winston');\nvar util = require('util');\nvar colors = require('colors/safe');\nimport * as errorsParser from 'springbokjs-errors';\nimport levelToSymbol from './levels/symbols';\nimport levelToColors from './levels/colors';\ncolors.enabled = true;\n\nvar stylify = function(string, colorsArray) {\n    if (!string || string.length === 0) {\n        return string;\n    }\n    let colorizedString = string;\n    for (let i = 0, l = colorsArray.length; i < l; ++i) {\n        colorizedString = colors[colorsArray[i]](colorizedString);\n    }\n    return colorizedString;\n};\n\nexport default function(params) {\n    var timestamp = params.timestamp();\n    var meta = params.meta;\n    var styles;\n    if (meta) {\n        if (meta.label) {\n            params.label = meta.label;\n            delete meta.label;\n        }\n        if (meta.styles) {\n            if (Array.isArray(meta.styles)) {\n                styles = {\n                    msg: meta.styles\n                };\n            } else {\n                styles = meta.styles;\n            }\n            delete meta.styles;\n        }\n    }\n    var output = timestamp ?  stylify(timestamp + ' ', ['gray'])  : '';\n    output += stylify(levelToSymbol[params.level], levelToColors[params.level]);\n    output += ' ';\n    output += params.label ? ('[' + params.label + '] ') : '';\n    output += stylify(params.message !== undefined ? params.message : '', levelToColors[params.level]);\n    if (meta !== null && meta !== undefined) {\n        if (meta && meta instanceof Error) {\n            try {\n                var parsedError = errorsParser.parse(meta);\n                meta = parsedError.toString();\n            } catch (err2) {\n                meta = meta.stack;\n            }\n        }\n        if (typeof meta !== 'object') {\n            output += ' ' + meta;\n        } else {\n            var length = Object.keys(meta).length;\n            if (length !== 0) {\n                if (typeof params.prettyPrint === 'function') {\n                    output += ' ' + params.prettyPrint(meta);\n                } else if (params.prettyPrint) {\n                    output += ' ' + ( length > 1 ? '\\n' : '' ) +\n                                util.inspect(meta, false, params.depth || null, false);\n                } else {\n                    output += ' ' + winston.config.serialize(meta);\n                }\n            }\n        }\n    }\n    return output;\n}\n"]}